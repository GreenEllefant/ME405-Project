<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Learn by Deuling - Nerf Gun Project: Learn by Deuling - Nerf Gun Project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Learn by Deuling - Nerf Gun Project<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Description</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Learn by Deuling - Nerf Gun Project </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="ss_introduction"></a>
Software Summary</h1>
<p>Our completes three main functions, taking an image with the thermal camera to determine the targets position, moving the motors to aim the nerf rifle to the target position, and firing the rifle once certain parameters have been met. The gives us five total tasks, one for each motor that positions the rifle, one for capturing and processing the image from the thermal camera, one for firing the rifle, and one for timing the image taking and firing to occur at specific moments in time.</p>
<div class="image">
<img src="TaskDiagram.png" alt="" width="800cm"/>
</div>
<h2><a class="anchor" id="ss_Camera"></a>
Camera Task</h2>
<p>The image that is captured by the camera is stored as an iterable image data type with 768 total values. Each value corresponds to a thermal value captured by the camera. The higher the value, the hotter that spot in space is. Since the human would be the hottest item in the frame of the thermal camera, we can assume that the brightest spot in the frame is a human. Taking the index of the brightest value, we can split it into a yaw index and pitch index according to the orientation of our thermal camera. Each index corresponds to a specific pitch or yaw angle for the rifle. The camera will only take images after the target as stopped moving in order to remove any possible bugs. Additionally, only four images are taken so the task does not interfere with the motor control. This task has the longest period since it takes the most amount of time to complete.</p>
<div class="image">
<img src="CameraStateDiagram.png" alt="" width="800cm"/>
</div>
<h2><a class="anchor" id="ss_motor"></a>
Motor Task</h2>
<p>The motor control uses a simple positional control. Our class can preform PID control, but we did not take advantage of this fact. In our testing, we found that basic positional control worked best for our purposes. The positional control class works based on the ticks of the encoder. Based on gear ratios, we can change the ticks from the encoder to degrees in the real world. We are able to read the encoder and compare it to the desired value to determine how hard we want to run the motors. This task has the highest period rate since it needs to be run multiple times in order for accurate data from the encoder. Once the motors are within a certain distance from the target, it tells the fire task to fire the rifle.</p>
<div class="image">
<img src="PitchStateDiagram.png" alt="" width="800cm"/>
</div>
 <div class="image">
<img src="YawStateDiagram.png" alt="" width="800cm"/>
</div>
<h2><a class="anchor" id="ss_firing"></a>
Firing Task</h2>
<p>The firing task waits until a certain amount of time has elapsed. Once that time has elapsed, it will turn on the flywheels and wait until the rifle is in position to fire. Once the motor tasks have determined that rifle is in position, the firing task then fires the rifle at the target.</p>
<div class="image">
<img src="FireStateDiagram.png" alt="" width="800cm"/>
</div>
<h2><a class="anchor" id="ss_timing"></a>
Timing Task</h2>
<p>The timing task simply calculates how long the program as been running. It does this so that it can time when to capture images and when it is able to fire safely without losing points. Once four seconds have passed, it tells the firing task to start spinning the flywheels. After 5 seconds, the timing task tells the camera task to start capturing images. Since timing is critical to the execution of the program, this task has the highest priority.</p>
<div class="image">
<img src="TimingStateDiagram.png" alt="" width="800cm"/>
</div>
 </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
